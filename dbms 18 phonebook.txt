CREATE TABLE PHONEBOOK(PNAME VARCHAR(20), MOBNO VARCHAR(12));
INSERT INTO PHONEBOOK VALUES('SALIM',9967432144),('SOORYA',7756432111);
CREATE TABLE DEL_PHONEBOOK(PNAME VARCHAR(20),MOBNO VARCHAR(12),MODIFY_DATE DATE);  

////// TRIGGER FUNCTION 

CREATE OR REPLACE FUNCTION rec_delete() 
RETURNS trigger AS
$$               
BEGIN
 INSERT INTO DEL_PHONEBOOK(PNAME,MOBNO,MODIFY_DATE) VALUES(OLD.PNAME,OLD.MOBNO,NOW());
 RETURN OLD;
END;
$$
LANGUAGE 'plpgsql';

///// CREATING A TRIGGER

CREATE TRIGGER DELETE_UPDATE
AFTER DELETE OR UPDATE
ON PHONEBOOK
FOR EACH ROW
EXECUTE PROCEDURE rec_delete();

UPDATE PHONEBOOK SET PNAME='DANISH' WHERE PNAME='SOORYA';
SELECT * FROM DEL_PHONEBOOK;
SELECT * FROM PHONEBOOK;

DELETE FROM PHONEBOOK WHERE PNAME='DANISH';
SELECT * FROM DEL_PHONEBOOK;
SELECT * FROM PHONEBOOK;